---
title: 資料正規化
description: 資料正規化
slug: data-normalization
date: 2024-11-06
type: Post
---
# 資料正規化
<p>因為最近開始碰一些後端的東西，之前的作品集都比較簡單，做一個controller，jwt驗證，開個http api，都沒有經過比較正式的資工系的訓練課程，剛好最近跟後端聊到資料正規劃，才發現有這套方法可以設計資料庫，所以就來研究一下。</p>


<h2>資料正規化</h2>
<p>目的：減少資料冗餘，提高資料一致性，減少資料更新時的複雜度。</p>
<p>而每一個正規劃的步驟，都是為了指在消除某種資料冗餘或是資料同步的問題。</p>
<p>資料正規劃分成第一正規化、第二正規化、第三正規化、第四正規化、第五正規化，比較需要注意的是BCNF跟第三正規化是不一樣的，常常會有人把BCNF跟第三正規化混為一談。</p>

#以下就以一個簡單的資料庫為例
![original data photo unload](/images/original-data.png)

<h2>第一正規化</h2>
<p>第一正規化是資料庫的欄位都必須是單一值，不能有陣列或是物件，且每個欄位都必須是原子值，也就是不能在拆分的數值，有逗號或是其他符號都不可以。</p>
<p>為了避免情況：假設沒有第一正規化，每一個欄位都可能會有多個值，取值時會變得非常麻煩，因為沒辦法透過單一欄位來取值。</p>
![first normalization photo unload](/images/first-normalization.png)


<h2>第二正規化</h2>
<p>第二正規化是所有非主鍵欄位都必須完全依賴於主鍵欄位，消除「部分功能相依」，每一個非鍵欄位必須完全相依主鍵，通常「主鍵有多個欄位」組成時會發生「部分功能相依」。</p>
<p>為了避免情況：假設沒有第二正規化，那當張三的名字改變時，我們需要同時更新兩個地方，這樣的資料庫就會變得非常難以維護。</p>
![second normalization photo unload](/images/second-normalization.png)

<h2>第三正規化</h2>
<p>第三正規化是所有非主鍵欄位都必須完全依賴於主鍵欄位，不能有推移依賴的狀況。</p>

<p>Tips：第三正規化跟第二正規化很像，但一個是指在消除非主鍵對主鍵的部分依賴(也就是要完全依賴)，另外一個在消除推移依賴。而什麼叫做一個部分依賴？</p>
<p>部分依賴：假設主鍵是(學號, 課程編號)，那我們需要確保主鍵的每一個欄位都必須要完全依賴於主鍵，不能有部分依賴的狀況。</p>
<p>而3NF是指在消除非主鍵欄位對主鍵欄位的推移依賴。</p>
<p>推移依賴：以下面這張表來說，產品名稱跟供應商名稱都共同依賴於「訂單ID」，而但產品名稱又依賴於供應商名稱，他們並沒有彼此獨立，而是彼此偶合再一起，這樣就稱為推移依賴。</p>
![third normalization photo unload](/images/third-normalization.png)

<h2>BCNF</h2>
<p>BCNF是所有非主鍵欄位都必須完全依賴於主鍵欄位，不能有部分依賴的狀況。</p>


<h2>第四正規化</h2>
<p>第四正規化解決的是多值相依的問題。</p>
<p>多值相依：假設一張表裡面有存在課程編號、老師、老師編號、老師名稱，雖然他符合1NF(每個欄位都是單一值)跟2NF(每個欄位都完全依賴於主鍵)，但是老師名稱依賴於老師編號，而老師編號又依賴於課程編號，這樣就稱為多值相依。</p>
![fourth normalization photo unload](/images/fourth-normalization.png)

<h2>第五正規化</h2>
<p>第五正規化是消除聯合相依。</p>

# 一些有趣的東西
<p>越高正規化的資料庫，資料冗餘越少，資料一致性越高，但相對的資料庫的複雜度也會越高，也就是説資料庫的查找、更新、刪除、插入的複雜度也會越高。</p>
<p>所以通常在設計資料庫時，並不是越高的正規化越好，而是依據自己的資料型態跟查找的需求來去設計，才可以在資料庫的完整性跟資料庫的效能中取得平衡！</p>
