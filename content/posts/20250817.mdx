---
title: LeetCode 837. New 21 Game
description: 837. New 21 Game
slug: 837. New 21 Game
date: 2025-08-17
type: Post
tags: [leetCode]
url: https://leetcode.com/problems/new-21-game/description
difficulty: medium
---
## 題解

```javascript
/**
 * @param {number} n
 * @param {number} k
 * @param {number} maxPts
 * @return {number}
 */
var new21Game = function (n, k, maxPts) {
  if (k === 0 || n >= k - 1 + maxPts) return 1.0;
  let dp = new Array(maxPts).fill(0.0);
  let result = 0.0;
  let percentation = 1.0;
  dp[0] = 1.0;
  for (let i = 1; i <= n; i++) {
    let prod = percentation / maxPts;
    if (i >= k) {
      result += prod;
    } else {
      percentation += prod;
    }
    if (i >= maxPts) {
      percentation -= dp[i % maxPts];
    }
    dp[i % maxPts] = prod;
  }
  return result;
};
```

時間複雜度：O(n)
空間複雜度：O(n)