---
title: LeetCode 2438. Range Product Queries of Powers
description: 2438. Range Product Queries of Powers
slug: 2438. Range Product Queries of Powers
date: 2025-08-11
type: Post
tags: [leetCode]
url: https://leetcode.com/problems/range-product-queries-of-powers/
difficulty: medium
---

## 題解

```javascript
/**
 * @param {number} n
 * @param {number[][]} queries
 * @return {number[]}
 */
var productQueries = function (n, queries) {
    const mod = 1000000007;
    let rep = 1;
    let bin = [];
    let res = []
    while (n > 0) {
        if (n % 2 === 1) {
            bin.push(rep);
        }
        n = Math.floor(n / 2)
        rep *= 2
    }
    for (const [first, last] of queries) {
        let acc = 1;
        for (let i = first; i <= last; i++) {
            acc = acc * bin[i] % mod
        }
        res.push(acc)
    }
    return res
};
```

時間複雜度：O(logn+queries.length)
空間複雜度：O(n)
